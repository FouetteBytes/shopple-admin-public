# ===========================================================================
# SHOPPLE ADMIN CONFIGURATION - EXAMPLE
# ===========================================================================
# Instructions:
#   1. Copy this file to .env: cp .env.example .env
#   2. Fill in all required values marked with <REQUIRED>
#   3. Configure DEPLOY_MODE based on your environment (local/cloud)
#   4. Update DOMAIN when deploying to production
# ===========================================================================

# ---------------------------------------------------------------------------
# SERVICE URLS - CONFIGURE FOR YOUR ENVIRONMENT
# ---------------------------------------------------------------------------
# LOCAL:  Set DEPLOY_MODE=local, uses http://localhost (Ingress on port 80)
# CLOUD:  Set DEPLOY_MODE=cloud, configure DOMAIN with your actual domain
# ---------------------------------------------------------------------------

# --- DEPLOYMENT MODE ---
# "local" = Docker Desktop / Minikube (uses localhost)
# "cloud" = Cloud cluster (uses your domain)
DEPLOY_MODE=local

# --- DOMAIN (for cloud deployment) ---
# Set your production domain when DEPLOY_MODE=cloud
# Example: app.example.com
DOMAIN=localhost

# --- EXTERNAL URLs (accessed from browser) ---
# Auto-configured based on DEPLOY_MODE and DOMAIN
# Local:  http://localhost
# Cloud:  https://your-domain.com
FRONTEND_URL=http://localhost

# --- BACKEND URL (for browser API calls) ---
# IMPORTANT: Leave EMPTY for Kubernetes/Ingress (frontend uses /api/*)
# Only set if backend is on a different domain than frontend
NEXT_PUBLIC_BACKEND_URL=

DASHBOARDS_URL=http://localhost/dashboards

# --- INTERNAL URLs (pod-to-pod inside K8s cluster) ---
# These use Kubernetes DNS and should not be changed
INTERNAL_BACKEND_URL=http://backend:5001

# --- CORS (Backend allows requests from this origin) ---
FRONTEND_ORIGIN=http://localhost

# ---------------------------------------------------------------------------
# SECURITY
# ---------------------------------------------------------------------------
# <REQUIRED> Generate with: openssl rand -base64 32
KEYSTORE_SECRET=

# <REQUIRED> Flask secret key - Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=

# ---------------------------------------------------------------------------
# BACKEND (Flask)
# ---------------------------------------------------------------------------
FLASK_ENV=production
HOST=0.0.0.0
PORT=5001
FLASK_RUN_HOST=0.0.0.0
FLASK_RUN_PORT=5001
USE_CONVERSATION_MEMORY=true
DEBUG_MODE=false

# ---------------------------------------------------------------------------
# FIREBASE - Server-side (keep secret, never commit to repository)
# ---------------------------------------------------------------------------
# <REQUIRED> Obtain from Firebase Console > Project Settings > Service Accounts
FIREBASE_PROJECT_ID=
FIREBASE_CLIENT_EMAIL=
FIREBASE_STORAGE_BUCKET=
FIREBASE_PRIVATE_KEY=

# ---------------------------------------------------------------------------
# FIREBASE - Client-side (public, safe to expose in browser)
# ---------------------------------------------------------------------------
# <REQUIRED> Obtain from Firebase Console > Project Settings > General > Your apps
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=

# ---------------------------------------------------------------------------
# DOCKER / KUBERNETES
# ---------------------------------------------------------------------------
# GitHub Container Registry owner for pulling images
GITHUB_REPOSITORY_OWNER=fouettebytes

# Docker image tag - use 'latest' for stable builds, or branch name for testing
IMAGE_TAG=latest

# ---------------------------------------------------------------------------
# CRAWLER
# ---------------------------------------------------------------------------
# Set to 1 to disable Firebase syncing and use local JSON only
CRAWLER_SCHEDULE_DISABLE_FIREBASE=0

# Firestore collection name for crawler schedules
CRAWLER_SCHEDULES_COLLECTION=crawler_schedules

# Storage mode: hybrid (local + cloud), local, or cloud
STORAGE_MODE=hybrid

# Local storage path for crawler output
LOCAL_STORAGE_PATH=./output

# Cloud storage path prefix
CLOUD_STORAGE_PATH=crawler-data

# Maximum number of files to keep locally before cleanup
MAX_LOCAL_FILES=100

# Automatically upload crawler results to cloud storage
AUTO_UPLOAD_ENABLED=true

# ---------------------------------------------------------------------------
# SLACK NOTIFICATIONS (Optional)
# ---------------------------------------------------------------------------
# Crawler automation alerts
SLACK_AUTOMATION_WEBHOOK=
SLACK_AUTOMATION_USERNAME=Shopple Automation
SLACK_AUTOMATION_ICON=:robot_face:

# Product request notifications
SLACK_PRODUCT_REQUEST_WEBHOOK=
SLACK_PRODUCT_REQUEST_USERNAME=Product Requests
SLACK_PRODUCT_REQUEST_ICON=:rotating_light:

# ---------------------------------------------------------------------------
# REDIS (Upstash) - Optional, for caching and rate limiting
# ---------------------------------------------------------------------------
# Obtain from Upstash Console > Database > REST API
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=
